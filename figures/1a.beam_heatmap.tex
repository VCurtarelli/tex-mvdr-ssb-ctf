%\pgfplotsset{
%    table/myStyleWithMeta/.style={    
%        meta=Label, 
%    }
%}
\pgfplotsset{compat=1.18}
\begin{figure}[!b]
\centering
{\footnotesize
\begin{subfigure}{0.33\linewidth}% resA
%\centering
\tikzsetnextfilename{beam_heatmap_resA}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmA}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resA_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{A}}$}
\label{subfig:beam_heatmap_resA}
\vspace*{2mm}
\end{subfigure}\hfill%
%
\begin{subfigure}{0.33\linewidth}% resB
%\centering
\tikzsetnextfilename{beam_heatmap_resB}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmB}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resB_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{B}}$}
\label{subfig:beam_heatmap_resB}
\vspace*{2mm}
\end{subfigure}\hfill%
%
\begin{subfigure}{0.33\linewidth}% resC
%\centering
\tikzsetnextfilename{beam_heatmap_resC}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmC}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resC_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{C}}$}
\label{subfig:beam_heatmap_resC}
\vspace*{2mm}
\end{subfigure} \newline%
%
\begin{subfigure}{0.33\linewidth}% resD
%\centering
\tikzsetnextfilename{beam_heatmap_resD}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmD}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resD_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{D}}$}
\label{subfig:beam_heatmap_resD}
\vspace*{2mm}
\end{subfigure}\hfill%
%
\begin{subfigure}{0.33\linewidth}% resE
%\centering
\tikzsetnextfilename{beam_heatmap_resE}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmE}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resE_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{E}}$}
\label{subfig:beam_heatmap_resE}
\vspace*{2mm}
\end{subfigure}\hfill%
%
\begin{subfigure}{0.33\linewidth}%res F
%\centering
\tikzsetnextfilename{beam_heatmap_resF}
\begin{tikzpicture}
    \begin{heatmap}{\meshcols}[colorbar to name={beamHmF}]
		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resF_PA_beam.csv};
    \end{heatmap}
\end{tikzpicture}
\vspace*{-2mm}\caption{$\bvh{\text{F}}$}
\label{subfig:beam_heatmap_resF}
\vspace*{2mm}
\end{subfigure} \newline%
%%
%\hspace*{3em}%
%\begin{subfigure}{0.49\linewidth}%res F
%%\centering
%\begin{tikzpicture}
%    \begin{heatmap}{\meshcols}[colorbar to name={beamHmG}]
%   		\addplot3[surf, mesh/cols=\meshcols, mesh/rows=\meshrows, shader=interp] table[x=ang, y=freq, z=val, col sep=comma] {figures/results/resG_PA_beam.csv};
%    \end{heatmap}
%\end{tikzpicture}
%\vspace*{-2mm}\caption{$\bvh{\text{G}}$}
%\label{subfig:beam_heatmap_resG}
%\vspace*{2mm}
%\end{subfigure} \newline
}

\tikzsetnextfilename{beam_heatmap_colormap}
\ref*{beamHmF}
\caption{Beampattern heatmap for all situations in Table~\ref{tab:combinations_sizes}. ${\x}$-axis is direction of source (in $\dg$), and ${\y}$-axis the frequency (in $\kilo\Hz$).}
\label{fig:beam_heatmap}
\end{figure}